<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agriculture Land Price Growth Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; background: #f4f4f4; color: #333; }
    h1 { text-align: center; margin-bottom: 20px; }
    form, .result, .future-section, .deal-section, .future-deal-section, .info-section, details { margin-top: 20px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    form { display: grid; gap: 10px; }
    label { display: flex; justify-content: space-between; font-weight: bold; }
    input[type=month], input[type=number] { width: 170px; padding: 5px; border: 1px solid #ccc; border-radius: 4px; }
    button { padding: 10px; font-size: 16px; border: none; border-radius: 4px; cursor: pointer; }
    #calculate { background: #28a745; color: #fff; }
    #calculate:hover { background: #218838; }
    .future-section, .deal-section, .future-deal-section { display: none; }
    details summary { font-weight: bold; cursor: pointer; }
    details p { margin: 10px 0; }
    #estimateFuture, #calculateDeal, #estimateFutureDeal { background: #007bff; color: #fff; }
    #estimateFuture:hover, #calculateDeal:hover, #estimateFutureDeal:hover { background: #0069d9; }
    .disclaimer { font-size: 10px; color: #666; margin-top: 20px; text-align: center; }
    .info-section strong { display: block; margin-bottom: 5px; }
    .info-section p, .info-section ul { margin: 5px 0; font-size: 14px; }
    .info-section ul { padding-left: 20px; }
  </style>
</head>
<body>
  <h1>Agriculture Land Price Growth Calculator</h1>

  <form id="calcForm">
    <label>Historic Year: <input type="month" id="historyYear" required></label>
    <label>Historic Price per Acre (₹): <input type="number" id="historyPrice" min="0" required></label>
    <label>Current Year: <input type="month" id="currentYear" required></label>
    <label>Current Price per Acre (₹): <input type="number" id="currentPrice" min="0" required></label>
    <button type="button" id="calculate">Calculate Growth</button>
  </form>

  <div id="result" class="result"></div>

  <div id="futureSection" class="future-section">
    <label>Future Years (1-10): <input type="number" id="futureYears" min="1" max="10" value="1"></label>
    <div id="futureDesc"></div>
    <button type="button" id="estimateFuture">Estimate Future Growth</button>
    <div id="futureResult" style="margin-top:15px;"></div>
    <div class="disclaimer">Disclaimer: Approximate estimate for educational/research only.</div>
  </div>

  <div id="dealSection" class="deal-section">
    <label>Number of Kanals: <input type="number" id="numKanals" min="1" placeholder="Enter kanals"></label>
    <button type="button" id="calculateDeal">Calculate Deal Account</button>
    <div id="dealResult" style="margin-top:15px;"></div>
  </div>

  <div id="futureDealSection" class="future-deal-section">
    <label>Future Years (1-10): <input type="number" id="futureDealYears" min="1" max="10" value="1"></label>
    <div id="futureDealDesc"></div>
    <button type="button" id="estimateFutureDeal">Estimate Future Prices on Deal</button>
    <div id="futureDealResult" style="margin-top:15px;"></div>
    <div class="disclaimer">Disclaimer: Approximate estimate for educational/research only.</div>
  </div>

  <div class="info-section">
    <strong>Abbreviations Used:</strong>
    <p><strong>CAGR</strong>: Compound Annual Growth Rate</p>
    <strong>Formula for CAGR:</strong>
    <p><code>CAGR = ((Current Price per Acre / Historic Price per Acre)^(1 / Years Gap) - 1) × 100</code></p>
    <p>Where:</p>
    <ul>
      <li><strong>Current Price per Acre</strong>: Current land price per acre (₹)</li>
      <li><strong>Historic Price per Acre</strong>: Historic land price per acre (₹)</li>
      <li><strong>Years Gap</strong>: Number of years between historic and current year</li>
    </ul>
  </div>

  <details>
    <summary>नरेश की जमीन खरीद सौदे में नरेश के लिए मुनाफा</summary>
    <div id="detailsProfit">
      <p id="pIn">निवेश पर CAGR <strong id="pCAGR">0.00%</strong> से 3 वर्षों में अनुमानित मूल्य: ₹<strong id="pFuture">0.00</strong> करोड़।</p>
      <p id="pFD">बैंक FD (7.5% qtr) पर अनुमानित राशि: ₹<strong id="pFDVal">0.00</strong> करोड़।</p>
      <p id="pProfit">नरेश का मुनाफा: ₹<strong id="pProfitVal">0.00</strong> करोड़; विक्रेता लाभ: ₹<strong id="pSellerVal">0.00</strong> करोड़।</p>
    </div>
  </details>

  <script>
    // Variables
    let cagrValue = 0;
    let pricePerAcre = 0;
    let buyerPays = 0;

    // Set month-picker ranges
    document.querySelectorAll('input[type="month"]').forEach(input => {
      const y = new Date().getFullYear();
      input.min = '1900-01';
      input.max = (y + 10) + '-12';
    });

    // Calculate CAGR and related metrics
    document.getElementById('calculate').onclick = function() {
      const hy = +document.getElementById('historyYear').value.split('-')[0];
      const hp = +document.getElementById('historyPrice').value;
      const cy = +document.getElementById('currentYear').value.split('-')[0];
      pricePerAcre = +document.getElementById('currentPrice').value;

      if (cy <= hy || hp <= 0 || pricePerAcre <= 0) {
        alert('Please enter valid years and positive prices.');
        return;
      }

      const years = cy - hy;
      const totalIncrease = pricePerAcre - hp;
      const avgIncrease = totalIncrease / years;
      const totalPercent = (totalIncrease / hp) * 100;
      cagrValue = (Math.pow(pricePerAcre / hp, 1 / years) - 1) * 100;

      document.getElementById('result').innerHTML =
        `<p>Years Gap: <strong>${years}</strong></p>` +
        `<p>Total Price Increase: <strong>₹${totalIncrease.toFixed(2)}</strong></p>` +
        `<p>Average Annual Increase: <strong>₹${avgIncrease.toFixed(2)}</strong></p>` +
        `<p>Total Percentage Increase: <strong>${totalPercent.toFixed(2)}%</strong></p>` +
        `<p>Finally CAGR: <strong>${cagrValue.toFixed(2)}%</strong></p>`;

      document.getElementById('futureSection').style.display = 'block';
      document.getElementById('dealSection').style.display = 'block';
      document.getElementById('futureDesc').textContent =
        `At the above growth rate (${cagrValue.toFixed(2)}%), future prices will likely look like this.`;
    };

    // Future growth for per-acre price
    document.getElementById('estimateFuture').onclick = function() {
      const yrs = +document.getElementById('futureYears').value;
      const ctr = document.getElementById('futureResult');
      ctr.innerHTML = '';
      const baseYear = +document.getElementById('currentYear').value.split('-')[0];

      for (let i = 1; i <= yrs; i++) {
        const yearLabel = baseYear + i;
        const price = pricePerAcre * Math.pow(1 + cagrValue / 100, i);
        ctr.innerHTML += `<p>${yearLabel}: ₹${price.toFixed(2)} per Acre</p>`;
      }
    };

    // Deal account: buyer pays based on acres
    document.getElementById('calculateDeal').onclick = function() {
      const kanals = +document.getElementById('numKanals').value;
      if (kanals <= 0) {
        alert('Enter valid number of kanals');
        return;
      }
      const acres = kanals / 8;
      buyerPays = pricePerAcre * acres;

      document.getElementById('dealResult').innerHTML =
        `<p>Acres: <strong>${acres.toFixed(2)}</strong></p>` +
        `<p>Buyer Pays: <strong>₹${buyerPays.toLocaleString()}</strong></p>`;

      document.getElementById('futureDealSection').style.display = 'block';
      document.getElementById('futureDealDesc').textContent =
        `At the above growth rate (${cagrValue.toFixed(2)}%), future prices for ₹${buyerPays.toLocaleString()} will likely look like this.`;

      // Update collapsible profit panel
      const futureVal = buyerPays * Math.pow(1 + cagrValue / 100, 3);
      const fdVal = buyerPays * Math.pow(1 + 0.075 / 4, 12);
      const profit = (futureVal - buyerPays) / 1e7;
      const sellerGain = (fdVal - buyerPays) / 1e7;

      document.getElementById('pCAGR').textContent = cagrValue.toFixed(2) + '%';
      document.getElementById('pFuture').textContent = (futureVal / 1e7).toFixed(2);
      document.getElementById('pFDVal').textContent = (fdVal / 1e7).toFixed(2);
      document.getElementById('pProfitVal').textContent = profit.toFixed(2);
      document.getElementById('pSellerVal').textContent = sellerGain.toFixed(2);
    };

    // Future growth on deal amount
    document.getElementById('estimateFutureDeal').onclick = function() {
      const yrs = +document.getElementById('futureDealYears').value;
      const ctr = document.getElementById('futureDealResult');
      ctr.innerHTML = '';
      const baseYear = +document.getElementById('currentYear').value.split('-')[0];

      for (let i = 1; i <= yrs; i++) {
        const yearLabel = baseYear + i;
        const price = buyerPays * Math.pow(1 + cagrValue / 100, i);
        ctr.innerHTML += `<p>${yearLabel}: ₹${(price / 1e7).toFixed(2)} करोड़</p>`;
      }
    };
  </script>
</body>
</html>
